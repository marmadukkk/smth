<!-- templates/search.html -->
{% extends "base.html" %}
{% block title %}Search{% endblock %}
{% block content %}
<h1 class="text-center mb-4">Search Ads</h1>
<form method="POST">
    <div class="mb-3">
        <label for="query" class="form-label">Query</label>
        <input type="text" class="form-control" id="query" name="query" required>
    </div>
    <div class="mb-3">
        <label for="category_id" class="form-label">Category (optional)</label>
        <select class="form-select" id="category_id" name="category_id">
            <option value="">All</option>
            {% for category in categories %}
            <option value="{{ category[0] }}">{{ category[1] }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="date_from" class="form-label">From Date (optional)</label>
            <input type="date" class="form-control" id="date_from" name="date_from">
        </div>
        <div class="col-md-6 mb-3">
            <label for="date_to" class="form-label">To Date (optional)</label>
            <input type="date" class="form-control" id="date_to" name="date_to">
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
</form>
{% if ads %}
<h3 class="mt-4">Results</h3>
<div class="row">
    {% for ad in ads %}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ ad[1] }}</h5>
                <p class="card-text">{{ ad[2] }}</p>
                <p class="card-text"><small class="text-muted">Posted by {{ ad[7] }} on {{ ad[6] }}</small></p>
                <a href="/ad/{{ ad[0] }}" class="btn btn-primary">View Details</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}